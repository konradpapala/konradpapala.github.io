<!DOCTYPE html>
<html>
    <head>
        <title>Yalog demo</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel = "stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.css">
		<link rel = "stylesheet" href = "../assets/milligram/milligram.min.css">
		<!-- DON'T use this link, download the file instead --> 
		<script src = 'https://rawgit.com/kpion/yalog/master/src/yalog.js'></script>
		<style>
			
			body {
			  margin: 0 auto;
			  max-width: 70em;
			}			
			#demoScriptDisplay{
				height:500px;
				font-size:90%;
				font-family:monospace;
			}

			#showOutputAsText{
				display:none;
				height:200px;
			}
			footer{
				height:150px;
			}
			

			/* -------------------------------------------- */        
			#yalog-wrapper{
				position: fixed;
				box-sizing: border-box;
				padding: 15px 15px 15px 15px;
				border-radius: 15px;
				bottom: 5px;
				/*width: 98%;*/
				width: 93%;
				min-height: 50px;
				display: flex;
				flex-direction: column;	
				/*background-color: black;
				color: white;*/
				background-color: #eaeaea;				
				color:black;
			}
			#yalog-wrapper #yalog-console{
				font-family: Courier;
				overflow-y: scroll;
				overflow: auto;
				height: 45vh;
				margin-bottom: 30px;
				display:none;
				    resize: vertical;
			}

			#yalog-wrapper #yalog-console pre {
				font-size:75%;
				padding:2px 2px;
				border-bottom: 1px dotted #ccc; 
				border-left:none;
				background:none;
				margin-bottom:0px;
				margin-top:0px;
				font-family:monospace;
			}


			#yalog-wrapper.yalog-enabled #yalog-console{
				display:block;
			}
			#yalog-wrapper #yalog-controls {
				display:flex;
				font-size:70%;
			}

			#yalog-wrapper #yalog-controls-toggle{
				font-size:130%;
				font-weight:bold;
				cursor:pointer;
			}
			
			#yalog-wrapper #yalog-controls-toggle::after{
				content:'↗'
			}
			#yalog-wrapper.yalog-enabled #yalog-controls-toggle::after{
				content:'↙'
			}			
			#yalog-wrapper #yalog-stats{
				display: flex;
			}
			#yalog-wrapper #yalog-controls-toggle{
				border-radius: 5px;


			}
			#yalog-wrapper #yalog-stats span{
				margin-left:5px;
				padding:5px 10px;
				color:black;
				border-radius: 5px;

			}
			#yalog-wrapper #yalog-stats #yalog-stats-total{
				background-color:#fbfbfb;
			}
			#yalog-wrapper #yalog-stats #yalog-stats-error{
				background-color:#DC143C;
			}
			#yalog-wrapper #yalog-stats #yalog-stats-warn{
				background-color:#FFFF66;
			}			
			#yalog-wrapper #yalog-stats #yalog-stats-other{
				background-color:#1E90FF;
			}			

		</style>		
    </head>
    <body>
        <h1>Yalog demo</h1>
		<h2>In progress...</h2>
		<p>See developer tools -> console</p>
		<p>Github src: <a href = 'https://github.com/kpion/yalog'>https://github.com/kpion/yalog</a><p>

		<h2>Here is the code being in use:</h2>
		<textarea id = 'demoScriptDisplay'>
			
		</textarea>
		
		<button id = 'runDemoScriptBtn'>Run it again</button>
		<br>
		
		<button id = 'showAsTextBtn' title = 'Which can be later sent... somewhere' >Show logged logs</button>
		<textarea id = 'showOutputAsText'></textarea>
		<br>
		
		<button id = 'randomHuskyBtn'>Random husky!</button>
		<br>
		
		<footer></footer>
		

		<div id = "yalog-wrapper" class = ''>
			Optional site log (click the "Toggle" button):<br><br>
			<div id = 'yalog-console'></div>
			<div id = 'yalog-controls'>
				<span id  = 'yalog-controls-toggle' onclick = "document.querySelector('#yalog-wrapper').classList.toggle('yalog-enabled')">Toggle</span>
				<div id = 'yalog-stats'>
					<span id = 'yalog-stats-total' title = 'Total'>0</span>
					<span id = 'yalog-stats-error' title = 'Errors'>0</span>
					<span id = 'yalog-stats-warn' title = 'Warnings'>0</span>
					<span id = 'yalog-stats-other' title = 'Other'>0</span>
				</div>	
			</div>
		</div>

		<script>
			
			//not really related to the yalog itself.
			
			let baseUrl = window.location.href;
			if(baseUrl.slice(-1) !== '/'){
				baseUrl += '/';
			}
		</script>
		
		<script id = 'demoScript'>
			
			yalog.addPlugin('site');//optional logging on website
			
			//creating a new selector (class), for displaying "banners". Just playing here... 
			yalog.cssSelector('banner','margin-bottom:5px;padding:15px 10px;background-color:#034F84;border-radius: 5px;font-size:120%;color:white;font-weight:bold');

			yalog.css('banner').log("Ya Log");
			yalog.log('Normal').style({'font-size': '130%'}).log('big').style('color:blue').log('... and blue');
			//predefined "selectors" (classes):
			yalog.css('h1').log('h1 selector');
			yalog.css('h2').log('h2 selector');
			yalog.css('h3').log('h3 selector');			
			yalog.css('indent').log('indented').css('indent').log('indented 2');
			
			//going back to normal
			yalog.setStyle({'color': '#000'});
			yalog.log('Color permanently changed to %100 black');
			
			yalog.css('h1').group('a group');
			yalog.log('Inside group');
			yalog.groupEnd();			
			
			/////////////////////
			//cloning tests for the purpose of another module
			
			yalog.css('banner').style('background-color:#DC4C46').log("Cloning tests (with a delayed output on the clone)");
			
			//this is another big module/class/whatever.
			function fakingSomeOtherModuleBeingLate(yalog = null){
				setTimeout(()=>{
					yalog.style('color:#DC4C46').log("I'm a different module, and late to the party, but it should be clear who I am");
					evenAnotherModule(yalog.clone('AnotherYetModule'));
				},1000);
				function evenAnotherModule(yalog = null){
					yalog.style('color:#034F84').log("I have a name too");
				}
			}
			
			//this clone and all its subclone will be indented and with "italics".
			let clone = yalog.css('indent i').clone("Laggard Module",{outputName:true});//we want the name to be outputted to the console
			fakingSomeOtherModuleBeingLate(clone);

		</script>
		<script>
			
			//not really related to the yalog itself. Just this site's stuff.
			(function(){

				let sel = (s) => document.querySelector(s);
				
				//"run again":
				
				let script = sel('#demoScript').textContent;
				script = script.replace(/\t\t\t/g,'');
				sel('#demoScriptDisplay').textContent = script;
				sel('#runDemoScriptBtn').addEventListener('click',()=>{
					let displayScript = sel('#demoScriptDisplay').value;
					eval(displayScript);
				});
				
				//show all the output as jsoned array.
				sel('#showAsTextBtn').addEventListener('click',() => {
					let asText = yalog.JSONStringify(yalog.story(), null, '  ');
					let asTextEl = sel ('#showOutputAsText');
					asTextEl.style.display = 'block';
					asTextEl.textContent = asText;
				});					
				
				sel('#randomHuskyBtn').addEventListener('click',() => {
					yalog.css('h2').log('Here you go, a random husky!');
					let rand = Math.round(Math.random() * 10);//only 10 huskies there.
					yalog.style(`
						background: url("${baseUrl}assets/images/huskies/husky-${rand}.jpg") no-repeat;
						padding: 140px 180px;
			
					`).log('');
			
				});
			})();
			
		</script>
    </body>
</html>
